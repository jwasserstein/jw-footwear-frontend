(this["webpackJsonpjw-footwear"]=this["webpackJsonpjw-footwear"]||[]).push([[0],Array(40).concat([function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,function(e,t,r){},,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(2),s=r(1),c=r.n(s),i=r(22),o=r.n(i),u=(r(40),r(3)),d=r(4),l=r(6),j=r(5),h=(r(41),r(12)),b=r(9),p=(r(42),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={menuActive:""},n.toggleMenu=n.toggleMenu.bind(Object(h.a)(n)),n.closeMenu=n.closeMenu.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"toggleMenu",value:function(){""===this.state.menuActive?this.setState({menuActive:"active"}):this.setState({menuActive:""})}},{key:"closeMenu",value:function(){this.setState({menuActive:""})}},{key:"render",value:function(){var e=this,t=this.props,r=t.username,a=t.cartCount,s=t.logOut,c=this.state.menuActive;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"Navbar-spacer"}),Object(n.jsxs)("header",{className:"Navbar "+c,children:[Object(n.jsxs)("div",{className:"Navbar-burger",onClick:this.toggleMenu,children:[Object(n.jsx)("span",{className:"Navbar-bar"}),Object(n.jsx)("span",{className:"Navbar-bar"}),Object(n.jsx)("span",{className:"Navbar-bar"})]}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/",className:"Navbar-brand",children:Object(n.jsx)("h1",{children:"JW Footwear"})}),Object(n.jsxs)("div",{className:"Navbar-links-left",children:[Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/",className:"Navbar-link",children:"Home"}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/products",className:"Navbar-link",children:"Products"}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/about",className:"Navbar-link",children:"About"})]}),r?Object(n.jsxs)("div",{className:"Navbar-links-right",children:[Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/cart",className:"Navbar-link",children:"Cart (".concat(a,")")}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/profile",className:"Navbar-link",children:r}),Object(n.jsx)(b.b,{onClick:function(){e.closeMenu(),s()},to:"/login",className:"Navbar-link Navbar-signup-btn",children:"Sign Out"})]}):Object(n.jsxs)("div",{className:"Navbar-links-right",children:[Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/cart",className:"Navbar-link",children:"Cart (".concat(a,")")}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/login",className:"Navbar-link",children:"Log In"}),Object(n.jsx)(b.b,{onClick:this.closeMenu,to:"/signup",className:"Navbar-link Navbar-signup-btn",children:"Sign Up"})]})]})]})}}]),r}(s.Component)),m=(r(50),function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"Footer-spacer"}),Object(n.jsx)("footer",{className:"Footer",children:"For demonstration purposes only, not a real store.  Made by Justin Wasserstein in 2020."})]})}),O=r(11),g=r(8);var v=function(e){var t=function(t){Object(l.a)(s,t);var r=Object(j.a)(s);function s(){return Object(u.a)(this,s),r.apply(this,arguments)}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.userId||this.props.history.push("/login")}},{key:"componentDidUpdate",value:function(){this.props.userId||this.props.history.push("/login")}},{key:"render",value:function(){return this.props.userId?Object(n.jsx)(e,Object(a.a)({},this.props)):Object(n.jsx)("div",{children:"Loading..."})}}]),s}(s.Component);return Object(g.b)((function(e){return{userId:e.authReducer.userId}}))(t)},f=(r(53),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={width:0,height:0},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Welcome",this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState(Object(a.a)(Object(a.a)({},this.state),{},{width:window.innerWidth,height:window.innerHeight}))}},{key:"render",value:function(){var e=this.state,t=e.width,r=e.height,a=t>900?r-113:r-137;return Object(n.jsxs)("div",{className:"LandingPage-main-container",style:{height:a},children:[Object(n.jsx)("div",{className:"LandingPage-Hero-image",style:{backgroundImage:"url('https://jw-footwear.s3.amazonaws.com/shoe-on-feet.jpg')"}}),Object(n.jsxs)("div",{className:"LandingPage-Hero-text",children:[Object(n.jsx)("h1",{children:"Welcome to JW Footwear!"}),Object(n.jsx)("p",{children:"We\u2019re the largest retailer of shoes that doesn\u2019t actually sell shoes!"}),Object(n.jsx)(b.b,{to:"/products",children:"Shop Now!"})]})]})}}]),r}(s.Component)),x=(r(54),function(){return Object(s.useEffect)((function(){return document.title="JW Footwear | About"})),Object(n.jsxs)("div",{className:"AboutPage-main-container",children:[Object(n.jsx)("h2",{children:"About JW Footwear"}),Object(n.jsx)("p",{children:"JW Footwear is a demonstration e-commerce application made for the purposes of learning React and Redux. It allows users to purchase shoes. It was designed in Figma and uses the following technologies:"}),Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"Front-end"}),": React and Redux"]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"Back-end"}),": Node.js and Express"]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("strong",{children:"Database"}),": MongoDB"]})]}),Object(n.jsxs)("p",{className:"AboutPage-handcrafted",children:["Hand-crafted with ",Object(n.jsx)("span",{children:"\u2764"})," in Glastonbury, Connecticut."]})]})}),w=r(14),C=r(10),S=r.n(C),y=r(15),N="LOG_IN",P="LOG_OUT",k="GET_PRODUCTS",D="ADD_CART_ITEM",R="RESTORE_CART",I="REMOVE_CART_ITEM",F="GET_ORDERS",U="EMPTY_CART",_="REMOVE_ORDERS",E="GET_REVIEWS",T="GET_ORDERED_PRODUCTS";function z(e,t,r){return M.apply(this,arguments)}function M(){return(M=Object(y.a)(S.a.mark((function e(t,r,n){var a,s,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("get"!==t.toLowerCase()){e.next=10;break}return e.next=3,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/api"+r,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}});case 3:return a=e.sent,e.next=6,a.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.next=12,fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL+"/api"+r,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(n)});case 12:return c=e.sent,e.next=15,c.json();case 15:return i=e.sent,e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return function(e){return new Promise(function(){var t=Object(y.a)(S.a.mark((function t(r,n){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z("get","/auth/orderedProducts",{});case 3:if(!(a=t.sent).error){t.next=6;break}return t.abrupt("return",n(a.error));case 6:return e({type:T,orderedProducts:a}),t.abrupt("return",r());case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",n(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,r){return t.apply(this,arguments)}}())}}r(56);var A=function(e){var t=e.color,r=e.children,a="Message-"+(t||"red");return Object(n.jsx)("div",{className:"Message "+a,children:r})},L=(r(57),function(e){var t=e.className,r=e.form,a=e.children,s=e.to,c=e.onClick,i=t?"Button ".concat(t):"Button";return r?Object(n.jsx)("button",{type:"submit",className:i+" Button-form",onClick:c,children:a}):Object(n.jsx)(b.b,{className:i,to:s,onClick:c,children:a})}),J=(r(58),function(e){var t=e.fields,r=e.loading,a=e.onSubmit,s=e.onChange,c=t.map((function(e){return Object(n.jsxs)("label",{htmlFor:e.name,className:"Form-label",children:[e.label,":",Object(n.jsx)("input",{type:e.type,className:"Form-field",value:e.value,onChange:s,id:e.name,name:e.name,placeholder:e.label,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",required:!0})]},e.name)}));return Object(n.jsxs)("form",{className:"Form-form",onSubmit:a,children:[c,Object(n.jsx)(L,{form:!0,className:"Form-btn",children:r?"Loading...":"Submit"})]})}),Y=(r(59),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).onChange=function(e){n.setState(Object(a.a)(Object(a.a)({},n.state),{},Object(w.a)({},e.target.name,e.target.value)))},n.onSubmit=function(e){e.preventDefault(),n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!0})),n.props.logIn(e.target.username.value,e.target.password.value).then((function(){n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!1,error:""})),n.props.history.push("/products")})).catch((function(e){n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!1,error:e}))}))},n.state={username:"",password:"",loading:!1,error:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Login"}},{key:"render",value:function(){var e=this.state,t=e.username,r=e.password,a=e.loading,s=e.error,c=[{label:"Username",name:"username",type:"text",value:t},{label:"Password",name:"password",type:"password",value:r}];return Object(n.jsxs)("div",{className:"LoginPage-main-container",children:[Object(n.jsx)("h2",{className:"LoginPage-message",children:"Log in to JW Footwear"}),s&&Object(n.jsx)(A,{color:"red",children:s}),Object(n.jsx)(J,{onSubmit:this.onSubmit,onChange:this.onChange,loading:a,fields:c})]})}}]),r}(s.Component)),q=Object(g.b)(null,{logIn:function(e,t){return function(r){return new Promise(function(){var n=Object(y.a)(S.a.mark((function n(s,c){var i;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z("post","/auth/signin",{username:e,password:t});case 3:if(!(i=n.sent).error){n.next=6;break}return n.abrupt("return",c(i.error));case 6:if(i.token){n.next=8;break}return n.abrupt("return",c("Error getting token"));case 8:return localStorage.setItem("token",i.token),r(Object(a.a)({type:N},i)),n.abrupt("return",s());case 13:return n.prev=13,n.t0=n.catch(0),n.abrupt("return",c(n.t0.message));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e,t){return n.apply(this,arguments)}}())}}})(Y),H=(r(60),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).onChange=function(e){n.setState(Object(a.a)(Object(a.a)({},n.state),{},Object(w.a)({},e.target.name,e.target.value)))},n.onSubmit=function(e){if(e.preventDefault(),n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!0})),n.state.password!==n.state.repeatPassword)return n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!1,error:"Your passwords don't match"}));n.props.signUp(n.state.username,n.state.password).then((function(){n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!1,error:""})),n.props.history.push("/accounts")})).catch((function(e){n.setState(Object(a.a)(Object(a.a)({},n.state),{},{loading:!1,error:e}))}))},n.state={username:"",password:"",repeatPassword:"",loading:!1,error:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Signup"}},{key:"render",value:function(){var e=this.state,t=e.username,r=e.password,a=e.repeatPassword,s=e.error,c=e.loading,i=[{label:"Username",name:"username",type:"text",value:t},{label:"Password",name:"password",type:"password",value:r},{label:"Repeat Password",name:"repeatPassword",type:"password",value:a}];return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"SignupPage-message",children:"Sign up with JW Footwear"}),s&&Object(n.jsx)(A,{children:s}),Object(n.jsx)(J,{onSubmit:this.onSubmit,onChange:this.onChange,fields:i,loading:c})]})}}]),r}(s.Component)),B=Object(g.b)(null,{signUp:function(e,t){return function(r){return new Promise(function(){var n=Object(y.a)(S.a.mark((function n(s,c){var i;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z("post","/auth/signup",{username:e,password:t});case 3:if(!(i=n.sent).error){n.next=6;break}return n.abrupt("return",c(i.error));case 6:if(i.token){n.next=8;break}return n.abrupt("return",c("Error getting token"));case 8:return localStorage.setItem("token",i.token),r(Object(a.a)({type:N},i)),n.abrupt("return",s());case 13:return n.prev=13,n.t0=n.catch(0),n.abrupt("return",c(n.t0.message));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e,t){return n.apply(this,arguments)}}())}}})(H),X=(r(61),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={currentPassword:"",newPassword:"",repeatNewPassword:"",loading:!1,message:"",messageColor:""},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Password"}},{key:"onChange",value:function(e){this.setState(Object(a.a)(Object(a.a)({},this.state),{},Object(w.a)({},e.target.name,e.target.value)))}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.newPassword!==this.state.repeatNewPassword)return this.setState(Object(a.a)(Object(a.a)({},this.state),{},{currentPassword:"",newPassword:"",repeatNewPassword:"",message:"New passwords must match",messageColor:"red"}));this.setState(Object(a.a)(Object(a.a)({},this.state),{},{loading:!0})),z("POST","/auth/changePassword",{currentPassword:this.state.currentPassword,newPassword:this.state.newPassword,repeatNewPassword:this.state.repeatNewPassword}).then((function(e){var r="error"in e?e.error:e.message,n="error"in e?"red":"green";t.setState({currentPassword:"",newPassword:"",repeatNewPassword:"",loading:!1,message:r,messageColor:n})}))}},{key:"render",value:function(){var e=this.state,t=e.currentPassword,r=e.newPassword,a=e.repeatNewPassword,s=e.message,c=e.messageColor,i=e.loading,o=[{label:"Current Password",name:"currentPassword",type:"password",value:t},{label:"New Password",name:"newPassword",type:"password",value:r},{label:"Repeat New Password",name:"repeatNewPassword",type:"password",value:a}];return Object(n.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(n.jsx)("h2",{className:"PasswordPage-message",children:"Change your password"}),s&&Object(n.jsx)(A,{color:c,children:s}),Object(n.jsx)(J,{onSubmit:this.onSubmit,onChange:this.onChange,fields:o,loading:i})]})}}]),r}(s.Component));function $(){return function(e){return new Promise(function(){var t=Object(y.a)(S.a.mark((function t(r,n){var s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z("get","/products",{});case 3:if(!(s=t.sent).error){t.next=6;break}return t.abrupt("return",n(s.error));case 6:if(s.products){t.next=8;break}return t.abrupt("return",n("Error getting products"));case 8:return e(Object(a.a)({type:k},s)),t.abrupt("return",r());case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",n(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}())}}r(62);var K=function(e){for(var t=e.rating,r=e.onClick,a=e.className,s=void 0===a?"":a,c=[],i=1;i<=5;i++){var o=i<=t?"fas fa-star ":"far fa-star ";c.push(Object(n.jsx)("i",{className:o+s,onClick:r&&r.bind(undefined,i)},i))}return Object(n.jsx)("div",{children:c})},G=(r(63),function(e){var t=e.name,r=e.price,a=e.shortDescription,s=e.imageUrl,c=e.rating,i=e.numReviews,o=e._id;return Object(n.jsxs)(b.b,{className:"Product",to:"/products/".concat(o),children:[Object(n.jsx)("img",{className:"Product-image",src:s,alt:t}),Object(n.jsxs)("div",{className:"Product-row",children:[Object(n.jsx)("h3",{children:t}),Object(n.jsxs)("p",{className:"Product-price",children:["$",r]})]}),Object(n.jsxs)("div",{className:"Product-row",children:[Object(n.jsx)("div",{children:Object(n.jsx)(K,{rating:c})}),Object(n.jsxs)("p",{children:[i," reviews"]})]}),Object(n.jsx)("p",{className:"Product-description",children:a})]})}),V=(r(64),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={message:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Products",this.props.lastUpdated||this.props.getProducts().catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props.products,t=this.state.message,r=[];return e.length>0?e.forEach((function(e){return r.push(Object(n.jsx)(G,{name:e.name,price:e.price,shortDescription:e.shortDescription,imageUrl:e.imageUrl,rating:e.rating,numReviews:e.reviews.length,_id:e._id},e._id))})):r.push(Object(n.jsx)("p",{children:"Loading..."},"loading")),Object(n.jsxs)("div",{children:[t&&Object(n.jsx)(A,{children:t}),Object(n.jsx)("p",{className:"ProductPage-materials",children:"Our shoes are made from the highest quality materials."}),Object(n.jsx)("div",{className:"ProductPage-product-container",children:r})]})}}]),r}(s.Component));var Q=Object(g.b)((function(e){return{products:e.productReducer.products,lastUpdated:e.productReducer.lastUpdated}}),{getProducts:$})(V),Z=(r(65),void 0),ee=function(e){for(var t=e.availableSizes,r=e.selectedSize,a=e.updateSize,s=[],c=6;c<14;c+=.5)t.includes(c)?r===c?s.push(Object(n.jsx)("div",{className:"Size Size-selected",onClick:a.bind(Z,c),children:c},c)):s.push(Object(n.jsx)("div",{className:"Size",onClick:a.bind(Z,c),children:c},c)):s.push(Object(n.jsx)("div",{className:"Size Size-deactivated",children:c},c));return Object(n.jsx)("div",{className:"Size-container",children:s})},te=(r(66),function(e){var t=e.rating,r=e.author,a=e.comment;return Object(n.jsxs)("div",{className:"Review",children:[Object(n.jsxs)("div",{className:"Review-inner-container",children:[Object(n.jsx)(K,{rating:t}),Object(n.jsx)("p",{className:"Review-author",children:r})]}),Object(n.jsx)("p",{className:"Review-comment",children:a})]})});r(67);var re=function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={selectedSize:0,message:"",messageColor:""},n.addToCart=n.addToCart.bind(Object(h.a)(n)),n.updateSize=n.updateSize.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"updateSize",value:function(e){this.setState(Object(a.a)(Object(a.a)({},this.state),{},{selectedSize:e}))}},{key:"addToCart",value:function(){var e=this,t=this.props.match.params.productId,r=this.state.selectedSize;if(this.timeout=setTimeout((function(){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{message:"",messageColor:""}))}),3e3),0===r)return this.setState(Object(a.a)(Object(a.a)({},this.state),{},{message:"Select a size first",messageColor:"red"})),!1;this.props.addCartItem(t,r,1),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{selectedSize:0,message:"Item added to cart",messageColor:"green"}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.productId,r=this.props,n=r.products,s=r.reviews,c=r.getProducts,i=r.getReviews;if(0===n.length)c().then((function(){var r=(n=e.props.products).find((function(e){return e._id===t}));document.title="JW Footwear | ".concat(r.name)})).catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{messageColor:"red",message:t}))}));else{var o=n.find((function(e){return e._id===t}));document.title="JW Footwear | ".concat(o.name)}t in s||i(t).catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{messageColor:"red",message:t}))}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.products,a=e.orderedProducts,s=this.state,c=s.selectedSize,i=s.message,o=s.messageColor,u=this.props.reviews[t.params.productId];if(0===r.length)return Object(n.jsx)("p",{style:{textAlign:"center"},children:"Loading..."});var d=r.find((function(e){return e._id===t.params.productId})),l=d.name,j=d.rating,h=d.availableSizes,p=d.longDescription,m=d.imageUrl,O=d.price,g=u&&u.map((function(e){return Object(n.jsx)(te,{rating:e.rating,author:e.authorUsername,comment:e.text},e._id)}));return Object(n.jsxs)("div",{className:"ShowPage-main-container",children:[Object(n.jsx)("h2",{children:l}),Object(n.jsxs)("div",{className:"ShowPage-inner-container",children:[Object(n.jsx)("img",{className:"ShowPage-image",src:m,alt:"Shoe"}),Object(n.jsx)(ee,{availableSizes:h,selectedSize:c,updateSize:this.updateSize}),Object(n.jsxs)("div",{className:"ShowPage-price-container",children:[Object(n.jsxs)("p",{className:"ShowPage-price",children:["$",O.toFixed(2)]}),Object(n.jsx)(K,{rating:j,className:"ShowPage-rating"}),Object(n.jsx)("button",{onClick:this.addToCart,children:"Add to Cart"}),i&&Object(n.jsx)(A,{color:o,children:i})]})]}),Object(n.jsx)("h2",{children:"Description"}),Object(n.jsx)("p",{className:"ShowPage-description",children:p}),Object(n.jsx)("h2",{children:"Reviews"}),Object(n.jsxs)("div",{className:"ShowPage-reviews-container",children:[Object(n.jsx)("div",{children:g}),Object(n.jsx)("div",{children:a.includes(t.params.productId)&&Object(n.jsx)(b.b,{to:"/review/".concat(t.params.productId),children:"Add\xa0Review"})})]})]})}}]),r}(s.Component);var ne=Object(g.b)((function(e){return{products:e.productReducer.products,reviews:e.reviewReducer,orderedProducts:e.authReducer.orderedProducts}}),{getProducts:$,addCartItem:function(e,t,r){var n=JSON.parse(localStorage.getItem("cart"));if(n){var a=n.find((function(r){return r.id===e&&r.size===t}));a?a.quantity+=r:n.push({id:e,size:t,quantity:r})}else n=[{id:e,size:t,quantity:r}];localStorage.setItem("cart",JSON.stringify(n));var s=+localStorage.getItem("cartCount")||0;return localStorage.setItem("cartCount",s+r),{type:D,id:e,size:t,quantity:r}},getReviews:function(e){return function(t){return new Promise(function(){var r=Object(y.a)(S.a.mark((function r(n,a){var s;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,z("get","/reviews/".concat(e),{});case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",a(s.error));case 6:return t({type:E,productId:e,reviews:s}),r.abrupt("return",n());case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",a(r.t0.message));case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}())}}})(re),ae=(r(68),function(e){var t=e.id,r=e.imageUrl,a=e.name,s=e.size,c=e.price,i=e.quantity,o=e.longDescription,u=e.removeCartItem;return Object(n.jsxs)("div",{className:"CartItem",children:[Object(n.jsxs)("div",{className:"CartItem-outer-container",children:[Object(n.jsx)("img",{src:r,alt:"Shoe"}),Object(n.jsxs)("div",{className:"CartItem-inner-container",children:[Object(n.jsxs)("div",{className:"CartItem-name-container",children:[Object(n.jsx)("h3",{children:a}),Object(n.jsxs)("p",{children:["Size: ",s]})]}),Object(n.jsxs)("div",{className:"CartItem-price-container",children:[Object(n.jsxs)("p",{className:"CartItem-price",children:["$",c.toFixed(2)]}),Object(n.jsxs)("p",{className:"CartItem-quantity",children:["Quantity: ",i]})]})]})]}),Object(n.jsx)("p",{className:"CartItem-description",children:o}),u&&Object(n.jsx)("p",{className:"CartItem-remove",onClick:u.bind(undefined,t,s,i),children:"Remove"})]})}),se=(r(69),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={message:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;document.title="JW Footwear | Cart",this.props.lastUpdated||this.props.getProducts().catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{message:t}))}))}},{key:"render",value:function(){var e=this.props,t=e.cart,r=e.products,a=e.lastUpdated,s=e.removeCartItem,c=e.history,i=this.state.message;if(!a)return Object(n.jsx)("p",{style:{textAlign:"center"},children:"Loading..."});var o=0,u=null===t||void 0===t?void 0:t.map((function(e){var t=r.find((function(t){return t._id===e.id}));return o+=t.price*e.quantity,Object(n.jsx)(ae,{id:e.id,imageUrl:t.imageUrl,name:t.name,size:+e.size,price:t.price,quantity:e.quantity,longDescription:t.longDescription,removeCartItem:s},"".concat(t.name).concat(e.size))})),d=o?10:0;return Object(n.jsxs)("div",{className:"CartPage-main-container",children:[Object(n.jsx)("h2",{children:"Your Cart"}),i&&Object(n.jsx)(A,{children:i}),Object(n.jsxs)("div",{className:"CartPage-inner-container",children:[Object(n.jsx)("div",{className:"CartPage-items",children:u}),Object(n.jsxs)("div",{className:"CartPage-summary-container",children:[Object(n.jsxs)("div",{className:"CartPage-summary",children:[Object(n.jsx)("h3",{children:"Summary"}),Object(n.jsxs)("div",{className:"CartPage-summary-line",children:[Object(n.jsx)("p",{children:"Subtotal:"}),Object(n.jsxs)("p",{children:["$",o.toFixed(2)]})]}),Object(n.jsxs)("div",{className:"CartPage-summary-line CartPage-small",children:[Object(n.jsx)("p",{children:"Shipping:"}),Object(n.jsxs)("p",{children:["$",d.toFixed(2)]})]}),Object(n.jsxs)("div",{className:"CartPage-summary-line CartPage-small",children:[Object(n.jsx)("p",{children:"Taxes:"}),Object(n.jsxs)("p",{children:["$",(.0635*o).toFixed(2)]})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"CartPage-summary-line",children:[Object(n.jsx)("p",{children:"Total:"}),Object(n.jsxs)("p",{children:["$",(1.0635*o+d).toFixed(2)]})]})]}),Object(n.jsx)("button",{onClick:function(){return c.push("/checkout")},children:"Checkout"})]})]})]})}}]),r}(s.Component));var ce=Object(g.b)((function(e){var t,r,n;return{cart:null===e||void 0===e||null===(t=e.cartReducer)||void 0===t?void 0:t.cart,products:null===e||void 0===e||null===(r=e.productReducer)||void 0===r?void 0:r.products,lastUpdated:null===e||void 0===e||null===(n=e.productReducer)||void 0===n?void 0:n.lastUpdated}}),{getProducts:$,removeCartItem:function(e,t,r){var n=JSON.parse(localStorage.getItem("cart"))||[],a=+localStorage.getItem("cartCount")||0;return n=n.filter((function(r){return r.id!==e||r.size!==t})),a-=r,localStorage.setItem("cart",JSON.stringify(n)),localStorage.setItem("cartCount",a),{type:I,id:e,size:t,quantity:r}}})(se),ie=r(32),oe=(r(70),function(e){var t=e.name,r=e.type,s=e.value,c=e.onChange,i=e.placeholder,o=Object(ie.a)(e,["name","type","value","onChange","placeholder"]);return Object(n.jsx)("input",Object(a.a)(Object(a.a)({type:r,className:"InputField-field",value:s,onChange:c,id:t,name:t,placeholder:i,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none"},o),{},{required:!0}))});function ue(){return function(e){return new Promise(function(){var t=Object(y.a)(S.a.mark((function t(r,n){var a,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z("get","/orders",{});case 3:if(!(a=t.sent).error){t.next=6;break}return t.abrupt("return",n(a.error));case 6:return s=a.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),e({type:F,orders:s}),t.abrupt("return",r());case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",n(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}())}}r(71);var de=function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={name:"",address:"",city:"",state:"",card:"",expDate:"",secCode:"",message:"",messageColor:"red"},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){document.title="JW Footwear | Checkout",this.props.cart.length||this.props.history.push("/cart")}},{key:"onChange",value:function(e){this.setState(Object(a.a)(Object(a.a)({},this.state),{},Object(w.a)({},e.target.name,e.target.value)))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state,n=r.name,s=r.address,c=r.city,i=r.state,o=r.card,u=r.expDate,d=r.secCode;this.props.placeOrder({items:this.props.cart,name:n,address:s,city:c,state:i,card:o,expDate:u,secCode:d}).then((function(){return t.setState({name:"",address:"",city:"",state:"",card:"",expDate:"",secCode:"",message:"Your order has been placed successfully.  You will be redirected in 3 seconds.",messageColor:"green"}),new Promise((function(e){return setTimeout((function(){return e()}),3e3)}))})).then((function(){t.props.emptyCart(),t.props.history.push("/products")})).catch((function(e){return t.setState(Object(a.a)(Object(a.a)({},t.state),{},{messageColor:"red",message:e}))}))}},{key:"render",value:function(){var e=this.state,t=e.name,r=e.address,a=e.city,s=e.state,c=e.card,i=e.expDate,o=e.secCode,u=e.message,d=e.messageColor;return Object(n.jsxs)("div",{className:"CheckoutPage-main-container",children:[Object(n.jsx)("h2",{children:"Checkout"}),u&&Object(n.jsx)(A,{color:d,children:u}),Object(n.jsxs)("form",{className:"CheckoutPage-form",onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"CheckoutPage-subform",children:[Object(n.jsx)("h3",{children:"Shipping Information"}),Object(n.jsx)("label",{htmlFor:"name",className:"CheckoutPage-label",children:"Full Name:"}),Object(n.jsx)(oe,{name:"name",type:"text",value:t,placeholder:"John Doe",onChange:this.onChange}),Object(n.jsx)("label",{htmlFor:"address",className:"CheckoutPage-label",children:"Street Address:"}),Object(n.jsx)(oe,{name:"address",type:"text",value:r,placeholder:"100 Wall Street",onChange:this.onChange}),Object(n.jsxs)("div",{className:"CheckoutPage-field-container",children:[Object(n.jsxs)("div",{style:{marginRight:"20px"},children:[Object(n.jsx)("label",{htmlFor:"city",className:"CheckoutPage-label",children:"City:"}),Object(n.jsx)(oe,{name:"city",type:"text",value:a,placeholder:"New York City",onChange:this.onChange,style:{marginRight:"20px"}})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("label",{htmlFor:"state",className:"CheckoutPage-label",children:["State ",Object(n.jsx)("span",{children:"(2 letter abbr.):"})]}),Object(n.jsx)(oe,{name:"state",type:"text",value:s,placeholder:"NY",minLength:"2",maxLength:"2",onChange:this.onChange})]})]})]}),Object(n.jsxs)("div",{className:"CheckoutPage-subform",children:[Object(n.jsx)("h3",{children:"Payment Information"}),Object(n.jsxs)("label",{htmlFor:"card",className:"CheckoutPage-label",children:["Card Number ",Object(n.jsx)("span",{children:"(Use a fake one):"})]}),Object(n.jsx)(oe,{name:"card",type:"text",value:c,placeholder:"3333444455556666",pattern:"[\\d]*",minLength:"16",maxLength:"16",onChange:this.onChange}),Object(n.jsxs)("div",{className:"CheckoutPage-field-container",children:[Object(n.jsxs)("div",{style:{marginRight:"20px"},children:[Object(n.jsxs)("label",{htmlFor:"expDate",className:"CheckoutPage-label",children:["Exp. Date ",Object(n.jsx)("span",{children:"(MM/YY):"})]}),Object(n.jsx)(oe,{name:"expDate",type:"text",value:i,placeholder:"01/25",pattern:"[\\d]{2}/[\\d]{2}",onChange:this.onChange})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"secCode",className:"CheckoutPage-label",children:"Security Code:"}),Object(n.jsx)(oe,{name:"secCode",type:"text",value:o,placeholder:"793",pattern:"[\\d]*",minLength:"3",maxLength:"3",onChange:this.onChange})]})]})]})]}),Object(n.jsx)(L,{form:!0,className:"CheckoutPage-btn",children:"Place Order"})]})]})}}]),r}(s.Component);var le=Object(g.b)((function(e){return{cart:e.cartReducer.cart}}),{placeOrder:function(e){return function(t){return new Promise(function(){var r=Object(y.a)(S.a.mark((function r(n,a){var s,c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,z("post","/orders",e);case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",a(s.error));case 6:return c=s.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),t({type:F,orders:c}),r.next=10,W()(t);case 10:return r.abrupt("return",n());case 13:return r.prev=13,r.t0=r.catch(0),r.abrupt("return",a(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e,t){return r.apply(this,arguments)}}())}},emptyCart:function(){return localStorage.setItem("cart","[]"),localStorage.setItem("cartCount","0"),{type:U}}})(de),je=(r(72),r(73),{Container:function(e){var t=e.children;return Object(n.jsx)("div",{className:"Options-container",children:t})},Item:function(e){var t=e.children,r=e.to;return Object(n.jsx)(b.b,{className:"Options-item",to:r,children:t})}}),he=function(){return Object(s.useEffect)((function(){return document.title="JW Footwear | Profile"})),Object(n.jsxs)("div",{className:"ProfilePage-main-container",children:[Object(n.jsx)("h2",{children:"Your Account"}),Object(n.jsxs)(je.Container,{children:[Object(n.jsx)(je.Item,{to:"/orders",children:"Order History"}),Object(n.jsx)(je.Item,{to:"/password",children:"Change Password"})]})]})},be=(r(74),r(23)),pe=r.n(be),me=function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={message:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;document.title="JW Footwear | Order History",this.props.lastUpdated||this.props.getOrders().catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{message:t}))}))}},{key:"render",value:function(){var e=this.props.orders,t=this.state.message,r=null===e||void 0===e?void 0:e.map((function(e){var t=e.items.reduce((function(e,t){return e+t.quantity}),0)||0,r=e.subTotal+e.shipping+e.taxes;return Object(n.jsx)(je.Item,{to:"/orders/".concat(e._id),children:Object(n.jsxs)("div",{className:"OrderHistoryPage-option-container",children:[Object(n.jsx)("p",{children:pe()(e.date).format("MM/DD/YYYY")}),Object(n.jsxs)("p",{children:[t," items"]}),Object(n.jsxs)("p",{children:["$",r.toFixed(2)]})]})},e._id)}));return Object(n.jsxs)("div",{className:"OrderHistoryPage-main-container",children:[Object(n.jsx)("h2",{children:"Order History"}),t&&Object(n.jsx)(A,{children:t}),Object(n.jsx)(je.Container,{children:r.length?r:Object(n.jsx)("p",{style:{textAlign:"center"},children:"You haven't placed any orders yet."})})]})}}]),r}(s.Component);var Oe=Object(g.b)((function(e){return{orders:e.orderReducer.orders,lastUpdated:e.orderReducer.lastUpdated}}),{getOrders:ue})(me),ge=(r(75),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={message:""},n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;document.title="JW Footwear | Order",this.props.lastUpdatedOrders||this.props.getOrders().catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{message:t}))})),this.props.lastUpdatedProducts||this.props.getProducts().catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{message:t}))}))}},{key:"render",value:function(){var e,t=this.props,r=t.orders,a=t.products,s=t.lastUpdatedOrders,c=t.lastUpdatedProducts,i=t.match,o=this.state.message,u=r.find((function(e){return e._id===i.params.orderId})),d=(null===u||void 0===u?void 0:u.subTotal)+(null===u||void 0===u?void 0:u.shipping)+(null===u||void 0===u?void 0:u.taxes);if(!s||!c)return Object(n.jsx)("p",{style:{textAlign:"center"},children:"Loading..."});var l=null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.map((function(e){var t=a.find((function(t){return t._id===e.id}));return Object(n.jsx)(ae,{id:e.id,imageUrl:t.imageUrl,name:t.name,size:+e.size,price:t.price,quantity:e.quantity,longDescription:t.longDescription},"".concat(t.name).concat(e.size))}));return Object(n.jsxs)("div",{className:"OrderShowPage-main-container",children:[Object(n.jsx)("h2",{children:"Your Order"}),o&&Object(n.jsx)(A,{children:o}),Object(n.jsx)("p",{className:"OrderShowPage-date",children:pe()(u.date).format("MM/DD/YYYY")}),Object(n.jsxs)("div",{className:"OrderShowPage-inner-container",children:[Object(n.jsx)("div",{className:"OrderShowPage-items",children:l}),Object(n.jsxs)("div",{className:"OrderShowPage-info-container",children:[Object(n.jsxs)("div",{className:"OrderShowPage-info",children:[Object(n.jsx)("h3",{children:"Summary"}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Subtotal:"}),Object(n.jsxs)("p",{children:["$",u.subTotal.toFixed(2)]})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line OrderShowPage-small",children:[Object(n.jsx)("p",{children:"Shipping:"}),Object(n.jsxs)("p",{children:["$",u.shipping.toFixed(2)]})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line OrderShowPage-small",children:[Object(n.jsx)("p",{children:"Taxes:"}),Object(n.jsxs)("p",{children:["$",u.taxes.toFixed(2)]})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Total:"}),Object(n.jsxs)("p",{children:["$",d.toFixed(2)]})]})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info",children:[Object(n.jsx)("h3",{children:"Payment Information"}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Name:"}),Object(n.jsx)("p",{children:u.name})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Address:"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:u.address}),Object(n.jsxs)("p",{children:[u.city,", ",u.state]})]})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Card Number:"}),Object(n.jsx)("p",{children:"XXXX-XXXX-XXXX-"+String(u.card)})]}),Object(n.jsxs)("div",{className:"OrderShowPage-info-line",children:[Object(n.jsx)("p",{children:"Expiration Date:"}),Object(n.jsx)("p",{children:u.expDate})]})]})]})]})]})}}]),r}(s.Component));var ve=Object(g.b)((function(e){return{orders:e.orderReducer.orders,lastUpdatedOrders:e.orderReducer.lastUpdated,products:e.productReducer.products,lastUpdatedProducts:e.productReducer.lastUpdated}}),{getOrders:ue,getProducts:$})(ge),fe=(r(76),function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={rating:0,text:"",message:"",messageColor:""},n.onChange=n.onChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;document.title="JW Footwear | Review";var t=this.props,r=t.orderedProducts,n=t.match,s=t.history,c=t.products,i=t.getProducts;(null===r||void 0===r?void 0:r.includes(n.params.productId))||s.push("/products"),(null===c||void 0===c?void 0:c.length)||i().catch((function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{messageColor:"red",message:t}))}))}},{key:"onChange",value:function(e){this.setState(Object(a.a)(Object(a.a)({},this.state),{},Object(w.a)({},e.target.name,e.target.value)))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state,n=r.text,s=r.rating,c=this.props,i=c.match,o=c.history,u=c.submitReview,d=c.getProducts,l=i.params.productId;u(l,n,s).then((function(){return t.setState({rating:0,text:"",message:"Your review has been submitted successfully.  You will be redirected in 3 seconds.",messageColor:"green"}),d()})).then((function(){return new Promise((function(e){return setTimeout((function(){return e()}),3e3)}))})).then((function(){return o.push("/products/".concat(l))})).catch((function(e){return t.setState(Object(a.a)(Object(a.a)({},t.state),{},{messageColor:"red",message:e}))}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.rating,s=t.text,c=t.message,i=t.messageColor,o=this.props,u=o.products,d=o.match,l=u.find((function(e){return e._id===d.params.productId}));return l?Object(n.jsxs)("div",{className:"ReviewPage-main-container",children:[Object(n.jsx)("h2",{children:"Add a Review"}),c&&Object(n.jsx)(A,{color:i,children:c}),Object(n.jsxs)("div",{className:"ReviewPage-item-container",children:[Object(n.jsx)("img",{src:l.imageUrl,alt:l.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:l.name}),Object(n.jsx)("p",{children:l.longDescription})]})]}),Object(n.jsxs)("form",{className:"ReviewPage-form",onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"ReviewPage-rating-container",children:[Object(n.jsx)("label",{children:"Rating:"}),Object(n.jsx)(K,{rating:r,onClick:function(t){return e.setState(Object(a.a)(Object(a.a)({},e.state),{},{rating:t}))},className:"ReviewPage-rating"})]}),Object(n.jsx)("label",{htmlFor:"ReviewPage-text",children:"Review:"}),Object(n.jsx)("textarea",{id:"ReviewPage-text",placeholder:"Type your review here...",name:"text",value:s,onChange:this.onChange}),Object(n.jsx)("button",{children:"Submit"})]})]}):Object(n.jsx)("p",{style:{textAlign:"center"},children:"Loading..."})}}]),r}(s.Component));var xe=Object(g.b)((function(e){return{products:e.productReducer.products,orderedProducts:e.authReducer.orderedProducts}}),{submitReview:function(e,t,r){return function(n){return new Promise(function(){var a=Object(y.a)(S.a.mark((function a(s,c){var i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z("post","/reviews/".concat(e),{text:t,rating:r});case 3:if(!(i=a.sent).error){a.next=6;break}return a.abrupt("return",c(i.error));case 6:return n({type:E,productId:e,reviews:i}),a.abrupt("return",s());case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",c(a.t0.message));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}())}},getProducts:$})(fe),we=function(e){Object(l.a)(r,e);var t=Object(j.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"componentDidMount",value:function(){this.props.restoreCart(),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){document.querySelector("html").style.minHeight="".concat(window.innerHeight,"px")}},{key:"render",value:function(){var e=this.props,t=e.username,r=e.cartCount,a=e.logOut;return Object(n.jsx)(b.a,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p,{username:t,cartCount:r,logOut:a}),Object(n.jsxs)(O.c,{children:[Object(n.jsx)(O.a,{path:"/review/:productId",component:v(xe)}),Object(n.jsx)(O.a,{path:"/orders/:orderId",component:v(ve)}),Object(n.jsx)(O.a,{path:"/orders",component:v(Oe)}),Object(n.jsx)(O.a,{path:"/profile",component:v(he)}),Object(n.jsx)(O.a,{path:"/checkout",component:v(le)}),Object(n.jsx)(O.a,{path:"/cart",component:ce}),Object(n.jsx)(O.a,{path:"/products/:productId",component:ne}),Object(n.jsx)(O.a,{path:"/products",component:Q}),Object(n.jsx)(O.a,{path:"/password",component:v(X)}),Object(n.jsx)(O.a,{path:"/signup",component:B}),Object(n.jsx)(O.a,{path:"/login",component:q}),Object(n.jsx)(O.a,{path:"/about",component:x}),Object(n.jsx)(O.a,{path:"/",component:f})]}),Object(n.jsx)(m,{})]})})}}]),r}(s.Component);var Ce=Object(g.b)((function(e){var t;return{username:null===e||void 0===e||null===(t=e.authReducer)||void 0===t?void 0:t.username,cartCount:e.cartReducer.cartCount}}),{restoreCart:function(){var e=JSON.parse(localStorage.getItem("cart"))||[],t=+localStorage.getItem("cartCount")||0;return{type:R,lsCart:e,lsCartCount:t}},logOut:function(){return function(e){localStorage.removeItem("token"),e({type:P}),e({type:_})}}})(we),Se=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,78)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))},ye=r(19),Ne=r(33),Pe={userId:"",username:"",orderedProducts:[],loggedInAt:0};var ke={products:[],lastUpdated:0};var De={cart:[],cartCount:0,lastUpdated:0};var Re={orders:[],lastUpdated:0};var Ie={};var Fe=Object(ye.c)({productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(a.a)(Object(a.a)({},e),{},{products:t.products,lastUpdated:Date.now()});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(a.a)(Object(a.a)({},e),{},{userId:t.id,username:t.username,joinDate:t.joinDate,orderedProducts:t.orderedProducts,loggedInAt:Date.now()});case P:return Object(a.a)(Object(a.a)({},e),{},{userId:"",username:"",joinDate:0,orderedProducts:[],loggedInAt:0});case T:return Object(a.a)(Object(a.a)({},e),{},{orderedProducts:t.orderedProducts});default:return e}},cartReducer:function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,s=arguments.length>1?arguments[1]:void 0,c=s.id,i=s.size,o=s.quantity,u=s.lsCart,d=s.lsCartCount;switch(s.type){case D:return(t=(e=n.cart.map((function(e){return Object(a.a)({},e)}))).find((function(e){return e.id===c&&e.size===i})))?t.quantity+=o:e.push({id:c,size:i,quantity:o}),r=n.cartCount+o,Object(a.a)(Object(a.a)({},n),{},{cart:e,cartCount:r,lastUpdated:Date.now()});case R:return Object(a.a)(Object(a.a)({},n),{},{cart:u,cartCount:d,lastUpdated:Date.now()});case I:return e=(e=n.cart.map((function(e){return Object(a.a)({},e)}))).filter((function(e){return e.id!==c||e.size!==i})),r=n.cartCount-o,Object(a.a)(Object(a.a)({},n),{},{cart:e,cartCount:r,lastUpdated:Date.now()});case U:return Object(a.a)(Object(a.a)({},n),{},{cart:[],cartCount:0,lastUpdated:Date.now()});default:return n}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(a.a)(Object(a.a)({},e),{},{orders:t.orders,lastUpdated:Date.now()});case _:return Object(a.a)(Object(a.a)({},e),{},{orders:[],lastUpdated:0});default:return e}},reviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(a.a)(Object(a.a)({},e),{},Object(w.a)({},t.productId,t.reviews));default:return Object(a.a)({},e)}}});var Ue=r(34),_e=function(){var e;return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ye.d,e=Object(ye.a)(Ne.a),Object(ye.e)(Fe,e)}();if(localStorage.getItem("token")){var Ee=Object(Ue.a)(localStorage.getItem("token"));Date.now()/1e3-Ee.iat<3600?(_e.dispatch(Object(a.a)({type:N},Ee)),W()(_e.dispatch)):localStorage.removeItem("token")}o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(g.a,{store:_e,children:Object(n.jsx)(Ce,{})})}),document.getElementById("root")),Se()}]),[[77,1,2]]]);
//# sourceMappingURL=main.9d0acf94.chunk.js.map